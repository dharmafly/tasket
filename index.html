<!DOCTYPE html>
<!--[if lt IE 7 ]> <html lang="en" class="ie6"> <![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="ie7"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="ie8"> <![endif]-->
<!--[if IE 9 ]>    <html lang="en" class="ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="en"> <!--<![endif]-->
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
	<meta name="author" content="" />
	<meta name="description" content="" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />

	<title>Tasket</title>

	<script>document.documentElement.className += ' js';</script>
	<link rel="shortcut icon" href="/favicon.ico" />
	<link rel="apple-touch-icon" href="/apple-touch-icon.png" />
	<link rel="stylesheet" href="css/global.css?v0.1" />
</head>
<body>
	<div class="header-container">
		<header>
			<h1>Tasket</h1>
			<nav>
				<ul>
					<li><a href="#/" title="The Tasket homepage">Home</a></li>
					<li><a href="#/about/" title="About the Tasket project">About</a></li>
					<li><a href="#/sign-up/" title="Sign up for an account">Sign up</a></li>
					<li class="login"><a href="#/login/" title="Login to Tasket">Login</a></li>
					<!-- <li class="login">
						<form action="#/logout" method="POST">
							<button class="link" type="submit">Logout</button>
						</form>
					</li> -->
				</ul>
			</nav>
			<h2><img src="http://placehold.it/16x16" width="16" height="16" alt="Current User’ avatar" /> Current User</h2>
			<div class="tasks">
				<h3>Tasks</h3>
				<dl>
					<dt>Pending</dt><dd>24</dd>
					<dt>Done</dt><dd>42</dd>
				</dl>
			</div>
		</header>
	</div>
	<article>
		<img class="active" src="http://placehold.it/30x30" width="30" height="30" alt="Logo for Project X" />
		<hgroup>
			<h1>Project X</h1>
			<h2>Company Y</h2>
		</hgroup>
		<ul class="tasks">
			<li>
				<p class="description">This is a task description, it should contain a few sentences detailing the nature of the task.</p>
				<aside class="meta">
					<p class="owner">
						<img src="http://placehold.it/14x14" width="14" height="14" alt="Another User’s avatar" />
						<a href="#/user/another-user/" title="See Another User’s tasks">Another User</a><br /> is doing this task
					</p>
				</aside>
			</li>
			<li>
				<p class="description">This is a task description, it should contain a few sentences detailing the nature of the task.</p>
				<aside class="meta">
					<form action="#/tasks/" method="POST"><button type="submit">I’ll do this</button></form>
				</aside>
			</li>
			<li>
				<p class="description">This is a task description, it should contain a few sentences detailing the nature of the task.</p>
				<aside class="meta">
					<p class="owner">
						<img src="http://placehold.it/14x14" width="14" height="14" alt="Your avatar" />
						<a href="#/user/current-user/" title="See your tasks">You’re</a> doing this
					</p>
					<form action="#/tasks/" method="POST"><button type="submit">I’ve done it</button></form>
				</aside>
			</li>
		</ul>
	</article>
	<div class="dashboard-container">
		<section class="dashboard">
			<ul class="listing notifications">
				<li><a href="#/tasks/" title="View your tasks">5 tasks need your approval</a></li>
				<li><a href="#/done/" title="View your completed tasks">3 tasks you’ve done have been approved</a></li>
				<li><a href="#/admin/" title="View the member admin area">2 tasks need your approval</a></li>
			</ul>
			<section class="quicklinks">
				<h1>My Projects</h1>
				<p class="help">This section provides you a quick list of your recent projects</p>
				<ul class="listing">
					<li><a href="#/projects/an-awesome-project/" title="View An awesome project">An awesome project</a></li>
					<li class="current"><a href="#/projects/another-awesome-project/" title="View Another awesome project">Another awesome project</a></li>
					<li><a href="#/projects/final-awesome-project/" title="View Final awesome project">Final awesome project</a></li>
				</ul>
				<p>
					<a class="button" href="#/projects/" title="View all projects">View All</a>
					<a class="button" href="#/projects/new/" title="Create a new project">New</a>
				</p>
			</section>
			<section class="quicklinks">
				<h1>Tasks I’m Doing</h1>
				<p class="help">This section provides you a quick list of your currently active tasks</p>
				<ul class="listing">
					<li><a href="#/tasks/an-awesome-project/" title="View An awesome project">An awesome project</a></li>
					<li><a href="#/tasks/another-awesome-project/" title="View Another awesome project">Another awesome project</a></li>
					<li><a href="#/tasks/final-awesome-project/" title="View Final awesome project">Final awesome project</a></li>
				</ul>
				<p>
					<a class="button" href="#/tasks/" title="View all tasks">View All</a>
				</p>
			</section>
			<section class="quicklinks">
				<h1>Tasks I Manage</h1>
				<p class="help">This section provides you a quick list of tasks you administer</p>
				<ul class="listing">
					<li><a href="#/projects/an-awesome-project/" title="View An awesome project">An awesome project</a></li>
					<li><a href="#/projects/another-awesome-project/" title="View Another awesome project">Another awesome project</a></li>
					<li><a href="#/projects/final-awesome-project/" title="View Final awesome project">Final awesome project</a></li>
				</ul>
				<p>
					<a class="button" href="#/admin/tasks/" title="View all projects">View All</a>
				</p>
			</section>
			<footer>
				<p class="statistics">
					<img src="http://placehold.it/50x50" width="50" height="50" alt="Chart showing percentage of completed tasks" />
					<em>2,030</em> tasks done by everyone</p>
				<nav>
					<ul>
						<li><a href="#/about/" title="Find out more about tasket">Tasket</a></li>
						<li><a href="#/blog/" title="Read the blog">Blog</a></li>
						<li><a href="#/contact/" title="Tell us what you think of Tasket">Contact Us</a></li>
					</ul>
				</nav>
				<p><a class="df" href="http://dharmafly.com" title="Dharmafly - apps for change">
				    App by <span class="df-name">Dharmafly</span>
				</a></p>
			</footer>
			<section id="project" class="detail">
				<h1>Detail Title</h1>
				<button class="action close">Close</button>
				<button class="link back">Back</button>
				<section class="profile">
					<img src="http://placehold.it/55x55" alt="The project logo" width="55" height="55" />
					<dl>
						<dt>Project:</dt>
						<dd>My latest project</dd>
						<dt>Organisation:</dt>
						<dd>Our wonderful organisation</dd>
						<dt>Tags:</dt>
						<dd>
							<a href="#/tags/apples/" title="See all projects tagged with Apples">Apples</a>,
							<a href="#/tags/cheese/" title="See all projects tagged with Cheese">Cheese</a>,
							<a href="#/tags/beans/" title="See all projects tagged with Beans">Beans</a>,
							<a href="#/tags/eggs/" title="See all projects tagged with Eggs">Eggs</a>
						</dd>
					</dl>
					<a class="button action locate" href="#center" title="Centre view on this project">Centre View</a>
					<a class="button" href="#/projects/my-project/edit/" title="Edit this project">Edit</a>
					<form class="form-button" action="#/project/my-project/" method="POST">
						<button class="button" type="submit">Delete</button>
					</form>
				</section>
				<section class="list">
					<h1>Tasks</h1>
					<a class="button action" href="#/tasks/new/" title="Create a new Task">New</a>
					<div class="listing-wrapper">
						<ul class="listing">
							<li>
								<p>New task item that needs to be done</p>
								<a class="button action edit" href="#/tasks/new-task/edit/" title="Edit this task">Edit</a>
								<form class="form-button" action="#/tasks/new-task/" method="POST">
									<button class="action delete" type="submit">Delete</button>
								</form>
							</li>
							<li>
								<p>New task item that needs to be done</p>
								<a class="button action edit" href="#/tasks/new-task/edit/" title="Edit this task">Edit</a>
								<form class="form-button" action="#/tasks/new-task/" method="POST">
									<button class="action delete" type="submit">Delete</button>
								</form>
							</li>
							<li>
								<p>New task item that needs to be done</p>
								<a class="button action edit" href="#/tasks/new-task/edit/" title="Edit this task">Edit</a>
								<form class="form-button" action="#/tasks/new-task/" method="POST">
									<button class="action delete" type="submit">Delete</button>
								</form>
							</li>
							<li>
								<p>New task item that needs to be done</p>
								<a class="button action edit" href="#/tasks/new-task/edit/" title="Edit this task">Edit</a>
								<form class="form-button" action="#/tasks/new-task/" method="POST">
									<button class="action delete" type="submit">Delete</button>
								</form>
							</li>
						</ul>
					</div>
				</section>
			</section>
			<section id="user" class="detail">
				<h1>Detail Title</h1>
				<button class="action close">Close</button>
				<section class="profile user">
					<img src="http://placehold.it/55x55" alt="The project logo" width="55" height="55" />
					<p class="name">Anonymous User</p>
					<p>London, UK</p>
				</section>
				<section class="quicklinks">
					<h1>My Projects</h1>
					<ul class="listing">
						<li><a href="#/projects/an-awesome-project/" title="View An awesome project">An awesome project</a></li>
						<li class="current"><a href="#/projects/another-awesome-project/" title="View Another awesome project">Another awesome project</a></li>
						<li><a href="#/projects/final-awesome-project/" title="View Final awesome project">Final awesome project</a></li>
					</ul>
					<p>
						<a class="button" href="#/projects/" title="View all projects">View All</a>
						<a class="button" href="#/projects/new/" title="Create a new project">New</a>
					</p>
				</section>
				<section class="quicklinks">
					<h1>Tasks I’m Doing</h1>
					<ul class="listing">
						<li><a href="#/tasks/an-awesome-project/" title="View An awesome project">An awesome project</a></li>
						<li><a href="#/tasks/another-awesome-project/" title="View Another awesome project">Another awesome project</a></li>
						<li><a href="#/tasks/final-awesome-project/" title="View Final awesome project">Final awesome project</a></li>
					</ul>
					<p>
						<a class="button" href="#/tasks/" title="View all tasks">View All</a>
					</p>
				</section>
				<section class="quicklinks last">
					<h1>Tasks I Manage</h1>
					<ul class="listing">
						<li><a href="#/projects/an-awesome-project/" title="View An awesome project">An awesome project</a></li>
						<li><a href="#/projects/another-awesome-project/" title="View Another awesome project">Another awesome project</a></li>
						<li><a href="#/projects/final-awesome-project/" title="View Final awesome project">Final awesome project</a></li>
					</ul>
					<p>
						<a class="button" href="#/admin/tasks/" title="View all projects">View All</a>
					</p>
				</section>
			</section>
			<section id="projects" class="detail">
				<h1>My Projects</h1>
				<button class="action close">Close</button>
				<section class="list">
					<h1>Pending</h1>
					<a class="button action" href="#/tasks/new/" title="Create a new Task">New</a>
					<nav class="listing-wrapper">
						<ul class="listing">
							<li>
								<a href="#project-one" title="View project one">Project One</a>
							</li>
							<li>
								<a href="#project-two" title="View project two">Project Two</a>
							</li>
							<li>
								<a href="#project-three" title="View project one">Project Three with a really, really long title</a>
							</li>
							<li>
								<a href="#project-four" title="View project four">Project Four</a>
							</li>
						</ul>
					</nav>
				</section>
				<section class="list">
					<h1>Done</h1>
					<nav class="listing-wrapper">
						<ul class="listing">
							<li>
								<a href="#project-five" title="View project five">Project Five</a>
							</li>
							<li>
								<a href="#project-six" title="View project six">Project Six</a>
							</li>
						</ul>
					</nav>
				</section>
			</section>
		</section>
	</div>
	<section class="lightbox">
		<div class="lightbox-inner">
			<div class="content">{content}</div>
			<button class="action close">Close Lightbox</button>
		</div>
	</section>

	<script id="template-login" type="text/html">
		<h1>Login</h1>
		<form action="#/login" method="POST">
			<ul>
				<li>
					<label for="field-email">Email Address</label>
					<input type="email" id="field-email" name="email" placeholder="example@tasket.com" value="" />
				</li>
				<li>
					<label for="field-password">Password <strong class="error">(This field is required)</strong></label>
					<input type="password" id="field-password" name="password" placeholder="password" value="" />
				</li>
			</ul>
			<div class="actions">
				<button type="submit">Login</button>
				<p class="note"><a href="#/forgot/" title="Retrieve your login details">Forgotten your details?</a></p>
			</div>
		</form>
	</script>

	<script id="template-signup" type="text/html">
		<h1>Register for a Tasket Account</h1>
		<p>Please provide the following details and we’ll create an account for you.</p>
		<form action="#/sign-up/" method="POST">
			<ul>
				<li>
					<label for="field-email">Email Address</label>
					<input type="email" id="field-email" name="email" placeholder="example@tasket.com" value="" />
				</li>
				<li>
					<label for="field-real-name">Your Name</label>
					<input type="text" id="field-real-name" name="real-name" placeholder="Joe Bloggs" value="" />
				</li>
				<li>
					<label for="field-password">Password</label>
					<input type="password" id="field-password" name="password" placeholder="password" value="" />
				</li>
				<li>
					<label for="field-password-confirm">Confirm Password</label>
					<input type="password" id="field-password-confirm" name="password-confirm" placeholder="password again" value="" />
				</li>
			</ul>
			<div class="actions">
				<button type="submit">Sign Up</button>
			</div>
		</form>
	</script>

	<script id="template-about" type="text/html">
		<h1>About Tasket</h1>
		<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor
		   incididunt ut labore et <strong>strong</strong> dolore magna aliqua. Ut enim ad
		   <em>emphais</em> minim veniam, quis <code>nostrud</code> exercitation ullamco
		   laboris nisi <a href="#">ut aliquip ex</a> ea commodo consequat.</p>
		<h2>A level two heading</h2>
		<p>irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla
		   pariatur. Excepteur sint occaecat cupidatat non proident</p>
		<p>sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
		<h3>A level three heading</h3>
		<blockquote>
			<p>Some form of blockquote would go here, perhaps some Shakespeare?</p>
		</blockquote>
	</script>

	<script id="template-new" type="text/html">
		<h1>Create a new task</h1>
		<form action="#/tasks/" method="POST">
			<ul>
				<li>
					<label for="field-title">Title</label>
					<input id="field-title" name="title" placeholder="My new task" value="" />
				</li>
				<li>
					<label for="field-timespan">Time required</label>
					<select id="field-timespan" name="timespan">
						<option value="600">Ten minutes</option>
						<option value="600">Half an hour</option>
						<option value="600">One day</option>
						<option value="600">Three days</option>
					</select>
				</li>
				<li>
					<label for="field-summary">Summary</label>
					<textarea id="field-summary" name="summary" cols="30" rows="6" placeholder="Description&hellip;"></textarea>
				</li>
			</ul>
			<div class="actions">
				<button type="submit">Create Task</button>
			</div>
		</form>
	</script>

	<script>
		function addClass(element, klass) {
			classes = element.className.split(' ');
			classes.push(klass);
			element.className = classes.join(' ');
		}

		function removeClass(element, klass) {
			var regexp = new RegExp('\\s*' + klass + '\\s*');
			element.className = element.className.replace(regexp, '');
		}

		(function () {
			// Temporarily position the projects & tasks for styling.
			var project = document.querySelector('article'),
			    offsets = [[-200, -40], [-20, -330], [120, -40]],
			    tasks;

			if (project) {
				project.style.top  = '40%';
				project.style.left = '40%';

				tasks = project.querySelectorAll('.tasks li');
				[].slice.call(tasks).forEach(function (task, index) {
					if (offsets[index]) {
						task.style.top  = offsets[index][0] + 'px';
						task.style.left = offsets[index][1] + 'px';
					}
				});
			}
		}());

		(function () {
			// Add the helper icon to all quicklinks in the dashboard.
			var helpers = document.querySelectorAll('.help'),
			    hover_class = 'active';

			[].slice.call(helpers).forEach(function (helper, index) {
				var info = document.createElement('a');

				info.href  = '#info';
				info.className = 'info';
				info.appendChild(document.createTextNode('Help'));

				// Add class to helper when button is hovered so we can display it in the stylesheet.
				info.onmouseover = info.onfocus = function () { addClass(helper, hover_class); };
				info.onmouseout  = info.onblur  = function () { removeClass(helper, hover_class); };

				// Append this to the dashboard section.
				helper.parentNode.appendChild(info);
			});
		}());

		(function () {
			var close = document.querySelectorAll('.close');

			[].slice.call(close).forEach(function (close, index) {
				close.onclick = function () { close.parentNode.style.display = 'none'; return false; };
			});
		}());

		(function () {
			// A very basic lightweight lightbox implementation.
			var lightbox = {
				_classnames: {
					display: 'show',
					animate: 'fade-in'
				},
				_element: document.querySelector('.lightbox'),
				_content: document.querySelector('.lightbox .content'),
				show: function () {
					addClass(lightbox._element, lightbox._classnames.display);

					// Need to use a timer for the animation to trigger.
					setTimeout(function () {
						addClass(lightbox._element, lightbox._classnames.animate);
					}, 0);

					return this;
				},
				hide: function () {
					var duration = parseFloat(window.getComputedStyle(lightbox._element, null)['-webkit-transition-duration']) || null;

					removeClass(lightbox._element, lightbox._classnames.animate);
					if (duration) {
						setTimeout(function () {
							removeClass(lightbox._element, lightbox._classnames.display);
						}, duration * 1000);
					} else {
						removeClass(lightbox._element, lightbox._classnames.display);
					}

					return this;
				},
				html: function (html) {
					this._content.innerHTML = html;
					return this;
				}
			};

			// Close the lightbox if the background is clicked.
			lightbox._element.onclick = function (event) {
				if (event.target === lightbox._element) {
					lightbox.hide();
				}
			};

			// Override the generic close button event set above.
			document.querySelector('.lightbox .close').onclick = lightbox.hide;

			window.lightbox = lightbox;
		}());

		// Set up the lightboxes.
		(function () {
			var template, templates = {
				'template-signup': '[href="#/sign-up/"]',
				'template-login': '.login a',
				'template-about': '[href="#/about/"]',
				'template-new': '[href$="/new/"]'
			}

			for (template in templates) {
			    if (templates.hasOwnProperty(template)){
				    (function () {
					    var html = document.getElementById(template).innerHTML;
					    document.querySelector(templates[template]).onclick = function () {
						    window.lightbox.html(html).show();
						    return false;
					    };
				    }());
				}
			}
		}());

		// Set up the dashbaord detail boxes.
		(function () {
			var projects  = document.getElementById('projects'),
			    project   = document.getElementById('project'),
			    user      = document.getElementById('user');

			projects.style.display = 'none';
			document.querySelector('[href="#/projects/"]').onclick = function () {
				projects.style.display = 'block';
				return false;
			};

			project.style.display = 'none';
			document.querySelector('.button[href="#/tasks/"]').onclick = function () {
				project.style.display = 'block';
				return false;
			};

			user.style.display = 'none';
			document.querySelector('[href="#/user/another-user/"]').onclick = function () {
				user.style.display = 'block';
				return false;
			};
		}());
	</script>
</body>
</html>
