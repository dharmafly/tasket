# Tasket API #

Note: in future, arrays may be further filtered by ?page=n&per_page=m - e.g. /hubs/3/tasks?page=2&per_page=10


## Hubs ##

    /hubs/                  # GET:   Gets all active hubs (ie. hubs that have unverified tasks remaining)
    /hubs/?ids=ids          # GET:   Gets array of hubs matching :ids (comma-delimited list of ids)
    /hubs/                  # POST:  Creates a hub (responds with new id & createdTime eg.
                                         {"id": "hub_id", "createdTime": 1298567873})
    /hubs/:id               # GET:   Gets a single hub for :id
    /hubs/:id               # PUT:   Updates a single hub for :id
    /hubs/:id               # DELETE Deletes a single hub for :id
    /hubs/:id/tasks         # GET    Gets array of all unverified tasks for this hub

### Hub Model Data ###

    {
        "id": "HUB_ID",           *required (assigned by server on creation)
        "title": "TITLE",         *required
        "owner": "USER_ID",       *required
        "description": "",
        "image": "",
        "tasks": [/* ids of tasks that are incomplete, i.e. unverified tasks */],
        "createdTime": 1298567873
    }

## Tasks ##

    /tasks/                  # GET:   Gets all unverified tasks
    /tasks/?ids=:ids         # GET:   Gets array of tasks matching :ids (comma-delimited list of ids)
    /tasks/?state=:state     # GET:   Gets array of tasks that are in the state :state, or a comma-delimited list of states
                                          (possible states: "new", "claimed", "done", "verified")
    /tasks/                  # POST:  Creates a task (responds with new id eg. {"id": "task_id"})
    /tasks/:id               # GET:   Gets a single task for :id
    /tasks/:id               # PUT:   Updates a single task for :id
    /tasks/:id               # DELETE Deletes a single task for :id

### Task Model Data ###

    {
        "id": "TASK_ID",          *required (assigned by server on creation)
        "hub": "HUB_ID"           *required
        "owner": "USER_ID",       *required
        "estimate": ESTIMATE_TIME,*required
        "description": "",
        "image": "",
        "state": "new",
        "createdTime": 1298567873
        "claimedBy": "user_id",
        "claimedTime": 1231214214,
        "doneTime": 1231214214,
        "verifiedBy": "user_id",
        "verifiedTime": 1231214214
    }

### Task State Constants ###

NEW     : "new",  
CLAIMED : "claimed",  
DONE    : "done",  
VERIFIED: "verified"  

## Users ##

     /users/               # GET:   Gets array of all users
     /users/?ids=:ids      # GET:   Gets array of users matching :ids (comma delimited list of ids)
     /users/               # POST:  Creates a user (responds with new id eg. {"id": "user_id"})
     /users/:id            # GET:   Gets a single user for :id
     /users/:id            # PUT:   Updates a single user for :id
     /users/:id            # DELETE Deletes a single user for :id

### User Model Data ###

    {
        "id": "USER_ID",      *required (assigned by server on creation)
        "name": "DISPLAY_NAME", *required
        "description": "",
        "location": "",
        "image": "",
        "admin": false,
        "hubs": {
            "owned": [/* hubs created by this user   */]
        },
        "tasks": {
            "owned": {
                "new":      [/* tasks owned by this user that have not been claimed */]
                "claimed":  [/* tasks owned by this user that have been claimed but not done */],
                "done":     [/* tasks owned by this user that have been done but not verified */],
                "verified": [/* tasks owned by this user that have been verified */]
            },
            "claimed": {
                "claimed":  [/* tasks claimed by this user that have not yet been done */],
                "done":     [/* tasks claimed by this user that have been done but not verified */],
                "verified": [/* tasks claimed by this user that have been verified */]
            }
        },
        "createdTime": 1298567873
    }


## Images ##

[image path] here is the value of the 'image' attribute on the models above.

    /media/[image path]           #GET original uploaded image
    /thumb/NxN/[image path]       #GET thumbnail constrained to N
    /thumb/NxN/[image path]?crop  #GET thumbnail constrained to N and cropped form the centre
